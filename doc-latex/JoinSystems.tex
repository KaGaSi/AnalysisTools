\section{JoinSystems} \label{sec:JoinSystems}

\input{JoinSystems-tikz}

This utility takes two existing systems and joins them into a single system that
contains all beads from the two coordinate files.

The second system can be offset against the first one (\tt{-off} option). In
each direction, all beads in the second system can be moved by specified
distance (only positive numbers are allowed) or moved so that the centre of that
box side is in the centre of the first box's side (use \tt{c} instead of a
number as an argument). The final box size is defined as the smallest box that
encompasses the two original boxes after the second one is moved. However, the
final box size can be redefined via the \tt{-b} option; the centre of the new
box is aligned with the centre of the original \enquote{smallest encompassing
box}. Note that no check is done whether the bead coordinates are within the new
box.

\Cref{fig:JoinSystems} illustrates the above-described behaviour (the red and
blue lines and balls represent the two original systems while the green lines
and transparent balls represent the new system). \Cref{fig:JoinSystems-b} shows
the simplest case when two systems are put into one larger system. In
\cref{fig:JoinSystems-c}, the final box size is also redefined; the positions of
the beads is unchanged, only the box size changes. Note that the absolute bead
coordinates remain unchanged only when the output coordinate file supports
defining the bounds of the simulation box; e.g., in \ltrj file, the lower and
upper bounds of the box are defined while for \vtf file, only the sidelengths of
the box are specified. Should \vtf be used as the output file, the saved
coordinates would, therefore, move so the box's origin is in the coordinate
beginning.

Using the \tt{-off c c c} option in \cref{fig:JoinSystems-d} moves the second
system (the blue one), so that the centre of its box (in all three dimensions)
lies on top of the centre of the first system's box (see the arrow in the
schematic in \cref{fig:JoinSystems-d}); coordinates of only the second system
are adjusted, changing the relative coordinates of beads from the two original
systems. If the \tt{-off} and \tt{-b} options are combined (as in
\cref{fig:JoinSystems-e}), the system created via the \tt{-off} option is then
assigned a new box size.

These examples are also provided in the \tt{Examples/JoinSystems} directory.

The output file can be any file that supports coordinates, and an extra
structure file can be created via the \tt{-o} option. Note that if an output
\vcf coordinate file is used, a \vsf structure file (with the same name except
for the extension) is also created.

\vspace{1em}
\noindent
Usage: \tt{JoinSystems <input1> <input2> <output> [options]}
\noindent
\begin{longtable}{p{0.319\textwidth}p{0.625\textwidth}}
  \toprule
  \multicolumn{2}{l}{Mandatory arguments} \\
  \midrule
  \tt{<input1>} & first input coordinate file \\
  \tt{<input2>} & second input coordinate file \\
  \tt{<output>} & output file with the new system \\
  \toprule
  \multicolumn{2}{l}{Options} \\
  \midrule
  \tt{-off <x>|c <y>|c <z>|c} & offset of the second system against the first
                                (\tt{c} to place it in the middle of the first
                                system) \\
  \tt{-b <x> <y> <z>} & side lengths of the new simulation box \\
  \tt{-o <file>} & optional output structure file \\
  \midrule
  \multicolumn{2}{l}{Other options (see the beginning of \cref{chap:Utils})}\\
  \multicolumn{2}{p{0.948\textwidth}}{As two input coordinate/structure files
    are needed, some options have 1 or 2 appended to specify which file they
    correspond to}\\
  \midrule
  \multicolumn{2}{p{0.948\textwidth}}{\tt{-i1}/\tt{-i2},
                                      \tt{-st1}/\tt{-st2},
                                      \tt{--verbose},
                                      \tt{--silent},
                                      \tt{--help},
                                      \tt{--version}}\\
  \bottomrule
\end{longtable}
