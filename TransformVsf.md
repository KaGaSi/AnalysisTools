Program TransformVsf {#TransformVsf}
=====

This program takes `dl_meso.vsf` structure file generated by `traject` and
DL_MESO input file `FIELD` and transforms them into `input.vsf` structure file.
This file contains more information than `dl_meso.vsf` making it better for
visualisation using VMD software.

Name, mass and charge of every bead type is read from `species` lines in
`FIELD`. The number of molecular types are read from `molecule` section.
For each molecular type its name, the number of molecules of given type, the
number of beads and bonds in the molecular type and the bonds themselves are
read.

Structure file `dl_meso.vsf` provides information about what bead is of
which type.

\todo Add possibility for bonds to be read from other file
\todo Add (optional?) arguments for different input/output file names

Required format of dl_meso.vsf {#TransformVsf-Require}
=====

The format is given by the `traject` program provided in DL_MESO software
(and modified by me). `TransformVsf` was tested only against files
generated by `traject`.

The first line specifies default bead type which means all atom lines for
beads of this type are unnecessary (provided those beads are not in a
molecule). All atom lines specify VDW radius and atom name. If an atom
is in a residue, its residue number is appended to the atom line.
> `atom default radius 1.000000 name <name>`
>
> `atom <id> radius 1.000000 name <name> resid <id>`
>
> `...`

`TransformVsf` was designed with this format in mind, but only the bead
number and name are read, so both VDW radius and residue number are
unnecessary.  Short version of `atom` and `name` keywords (`a` and `n`
respectively) can be used.  Other keywords can be included, since
`TransformVsf` will disregard them. No comments are allowed.

Bond lines of `dl_meso.vsf` are not read and are therefore irrelevant to
`TransformVsf`.

Format of output structure file {#TransformVsf-output}
=====

Every atom line in the generated structure file contains bead's index
number, mass, charge and name. Atom lines for beads in molecules also
contain molecule's id number and the name of the type of molecule. The
bond section of `input.vsf` lists all bonds one by one (i.e. no chains of
bonds in the format `<(int)>:: <(int)>` are used). The file has the
following format:
> `atom default name <name> mass <m> charge <q>`
>
> `...`
>
> `atom <id> name <name> mass <m> charge <q>`
>
> `...`
>
> `atom <id> name <name> mass <m> charge <q> segid <name> resid <id>`
>
> `...`
>
> `<bonded bead id1>: <bonded bead id2>`
>
> `...`

For VMD atom selection:
* `segid <name>` selects all molecules with given name(s)
* `resid <id>` selects molecule(s) with given index number(s)
* `charge <q>` selects all beads with given charge(s) (double quotes are
  required for negative charge)
* `mass <m>` selects all beads with given mass(es)
